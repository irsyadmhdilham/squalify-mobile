<ion-header>
  <ion-navbar>
    <ion-title>
      <img style="width: 5em" src="../../../assets/imgs/squalify.png" alt="squalify">
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding [ngSwitch]="pageStatus">
  <loading type="list" *ngSwitchCase="'loading'"></loading>
  <fetch-error message="Failed to retrieve schedules" [retry]="fetch.bind(this)" *ngSwitchCase="'error'"></fetch-error>
  <ng-container *ngSwitchDefault>
    <h5 title>Schedules</h5>
    <ion-row margin-bottom justify-content-between id="top-container">
      <button ion-button clear class="remove-margin-button" no-padding (tap)="addSchedule()">Add schedule</button>
      <div>
        <button ion-button outline small (tap)="filterMonth()">{{month ? month : 'By month'}}</button>
        <button ion-button outline small (tap)="filter()">Filter</button>
      </div>
    </ion-row>
    <ng-container *ngIf="schedules.length > 0; then schedulesContent; else schedulesNoContent"></ng-container>
    <ng-template #schedulesContent>
      <ng-container *ngIf="notFound; then notFoundTemplate; else scheduleTemplate"></ng-container>
      <ng-template #scheduleTemplate>
        <ion-list>
          <ion-item no-padding (tap)="showDetail(schedule)" *ngFor="let schedule of schedules; index as i">
            <section item-start>
              <h2 ion-text color="primary">{{schedule.date | date:'dd' | uppercase}}</h2>
              <h2 ion-text color="grey">{{schedule.date | date:'MMM' | uppercase}}</h2>
            </section>
            <h5>{{schedule.title}}</h5>
            <p>{{schedule.date | date:'hh:mma'}}, {{schedule.location}}</p>
          </ion-item>
        </ion-list>
      </ng-template>
      <ng-template #notFoundTemplate>
        <not-found></not-found>
      </ng-template>
    </ng-template>
    <ng-template #schedulesNoContent>
      <empty-content
        title="Empty schedule"
        message="Currently you got no schedule"
        [submit]="addSchedule.bind(this)"
        buttonText="Add schedule"
      ></empty-content>
    </ng-template>
  </ng-container>
</ion-content>
